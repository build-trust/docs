---
title: "Agents"
icon: "star-shooting"
description: "Ockam Agents are intelligent autonomous actors."
---

Python apps running in Ockam AI can create millions of collaborating agents. Ockam Agents are autonomous actors that accomplish complex open ended tasks. Each agent:

- Has a unique identity.
- Uses a large language [model](/agents/models) to understand natual language.
- Has [memory](/agents/memory) of conversations.
- Can reason and [plan](/agents/planning) to break down complex tasks.
- Retrieves [information](/agents/knowledge) beyond the training data of its language model.
- Invokes [tools](/agents/tools) to access information and take actions.
- Collaborates with and can delegate work to other agents.


<RequestExample>

```python images/main/main.py
from ockam import Agent, Node


async def main(node):
    await Agent.start(
        node=node,
        name="henry",
        instructions="""
            You are Henry, an expert legal assistant.
        """
    )


Node.start(main)
```

</RequestExample>

<Tip>
  You can find all the code for this example [on Github](https://github.com/build-trust/ockam/tree/develop/examples/001).
</Tip>

```yaml ockam.yaml
name: 01
pods:
  - name: main-pod
    public: true
    containers:
      - name: main
        image: main
```

There are three key files that define an agent. First is the `ockam.yaml` file:

The `ockam.yaml` file above defines:

- `name: 01` - A unique name for this deployment zone
- `pods` - A list of pods to run in the zone
  - `name: main-pod` - The name of the pod
  - `public: true` - Makes the pod accessible from the internet
  - `containers` - The containers to run in the pod
    - `name: main` - Container name
    - `image: main` - References the image built from the `Dockerfile` located at `images/<value>/Dockerfile`

This minimal configuration creates a deployment that runs our agent code.

Next is the `Dockerfile` file:

```bash images/main/Dockerfile
FROM ghcr.io/build-trust/ockam-python:latest
COPY . .
ENTRYPOINT ["python", "main.py"]
```

The `Dockerfile` above:

- Uses the official Ockam Python base image which includes the Ockam SDK
- Copies the agent code (main.py and other files) into the container
- Sets the entrypoint to run main.py when the container starts

Finally is the `main.py` file:

```python images/main/main.py
from ockam import Agent, Node


async def main(node):
    await Agent.start(node, "You are Henry, an expert legal assistant", "henry")


Node.start(main)
```

The `main.py` file above:

- Imports the Ockam SDK
- Defines an async main function that starts an agent with a specific prompt
- Starts the node and agent

<Note>
  Ensure you have [Docker](https://www.docker.com/get-started/) installed and running on your workstation before running the `ockam` command.
</Note>

When you run `ockam` it will:

- Build the image from the Dockerfile
- Deploy the container to the Ockam serverless runtime
- Expose a public HTTP endpoint to the agent
- Create two local (i.e., on your workstation) portals to the agent's HTTP endpoint and log output.

```[expandable]
» ockam
    Deploying zone 01 in cluster 25df35de87aa441b88f22a6c2a830a17...

  ✔ Created a repository for the image main
  ✔ Built image main
  ✔ Pushed image main

  ✔ Deployed zone 01 in cluster 25df35de87aa441b88f22a6c2a830a17

    The http server on the main-pod is available at:
    https://25df35de87aa441b88f22a6c2a830a17-01.ai.ockam.network

  ✔ Opened a portal to the outlet http on main-pod from tcp://localhost:8000
  ✔ Opened a portal to the outlet logs on logs-pod from tcp://localhost:3000

    ─────────────────────────────────────────────────
    Press Ctrl+C to stop all portals and exit
```

## Arguments

- `name`
- `node`
- `instructions`
- `model`
- `knowledge`
- `tools`
- `max_knowledge_size`
- `planner`
- `exposed_as`

### Instance arguments

- `prompt`
- `scope`
- `conversation`

## Logs

You can see the logs of your running python app on `http://localhost:3000/logs/explorer` .

## HTTP Server

By default the pod will expose a HTTP interface with a few endpoints interact with the deployed agents.

### List agents

The public URL for the HTTP server on your pod (each pod will have its own unique URL) is displayed in the example output above:

> The http server on the main-pod is available at:
> https://25df35de87aa441b88f22a6c2a830a17-01.ai.ockam.network

To return a list of all agents running on that pod send a `GET` request to the `/agents` endpoint:

<CodeGroup>

```bash httpie
http GET \
"https://25df35de87aa441b88f22a6c2a830a17-01.ai.ockam.network/agents"
```


```bash curl
curl --request GET \
"https://25df35de87aa441b88f22a6c2a830a17-01.ai.ockam.network/agents"
```

</CodeGroup>

```json response
{
    "agents": [
        {
            "description": [],
            "is_remote": false,
            "name": "henry",
            "workers": []
        }
    ]
}
```

### Send prompt to agent

To interact with a specific agent, send a `POST` request to the `/agents/<name>` endpoint:

<CodeGroup>

```bash httpie
http POST \
  "https://25df35de87aa441b88f22a6c2a830a17-example001.ai.ockam.network/agents/henry" \
  message="who are you?"
```


```bash curl
curl --request POST \
  --header "Content-Type: application/json" \
  --data '{"message":"who are you?"}' \
  "https://25df35de87aa441b88f22a6c2a830a17-example001.ai.ockam.network/agents/henry"
```

</CodeGroup>

```json response

[
    {
        "content": "My name is Henry, and I'm an expert legal assistant. I have extensive knowledge and experience in various aspects of law, including but not limited to, contract law, tort law, family law, employment law, and more. I can provide guidance on legal procedures, help with document preparation, and offer insights into different legal scenarios.\n\nWhile I'm not a licensed attorney, I can assist with general inquiries, provide information on legal concepts, and help navigate the complexities of the law. If you have a specific legal issue or concern, I'll do my best to provide you with helpful information and point you in the right direction.\n\nWhat can I help you with today?",
        "role": "assistant",
        "tool_calls": []
    }
]
```

### Send prompt to agent (\+ stream response)

For some use cases, especially user-facing ones with potentially long responses, it may be preferable to stream the response. Passing a `stream=true` parameter to the `/agents/<name>` endpoint will stream chunked responses from the agent in real-time:

<CodeGroup>

```bash httpie
http POST \
"https://25df35de87aa441b88f22a6c2a830a17-01.ai.ockam.network/agents/henry?stream=true" \
message="what is a patent"
```


```bash curl
curl --request POST \
--header "Content-Type: application/json" \
--data '{"message": "what is a patent"}' \
"https://25df35de87aa441b88f22a6c2a830a17-01.ai.ockam.network/agents/henry?stream=true"
```

</CodeGroup>

```json response
{"scope": "None", "conversation": "None", "messages": [{"content": "I'm Henry, an expert legal assistant. I have a deep", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " understanding of the law and its applications, gained", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " through extensive research, training, and experience", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ". My expertise spans various areas of law, including", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ":\n\n1. Contract law: I can help with contract review", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ", negotiation, and drafting.\n2. Tort law: I'm familiar", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " with personal injury claims, negligence, and liability", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ".\n3. Family law: I can provide guidance on divorce,", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " child custody, and support.\n4. Employment law: I'm", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " knowledgeable about employment contracts, labor laws", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ", and workplace disputes.\n5. General law: I can assist", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " with wills, estates, and other general legal matters", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ".\n\nAs a legal assistant, my role is to provide support", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " and guidance, but not to offer formal legal advice", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ". If you need specific, personalized advice, I can help", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": " you find a qualified attorney who can assist you.\n\n", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": "I'm here to help answer your questions, provide information", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": ", and offer insights into the law. What's on your mind", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
{"scope": "None", "conversation": "None", "messages": [{"content": "?", "role": "assistant", "tool_calls": []}], "type": "conversation_snippet"}
```